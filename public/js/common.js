setBaseScripts=function(t){null==t&&(t="body"),0<$(t).find("[editor]:not(.activated)").length&&initEditors(),ddrSelect(t),ddrPhonecodes(),ddrInitTabs(),$(t).find("[phonemask]:not([multicode])").each(function(){var t=$(this).attr("phonemask")||"(^^^) ^^^-^^-^^",e=$(this).attr("code")||"+7",i=$(this).attr("placeholder")||(e+" "+t).replace(/[\^&]/g,"_");$(this).mask(e+" "+t,{autoclear:!1}).attr({placeholder:i,type:"tel"})}),$(t).find("[mask]").each(function(){var t,e=$(this).attr("mask");if(!e)return!0;t=$(this).attr("placeholder")||e.replace(/[\^&]/g,"_"),$(this).mask(e,{autoclear:!1}).attr({placeholder:t})}),$(t).find("[numberformat]").each(function(){var t,e,i=$(this).attr("numberformat");""!=i?(t=null!=(i=i.split("|"))[0]?i[0]:2,e=null!=i[1]?i[1]:".",i=null!=i[2]?i[2]:" ",$(this).number(!0,t,e,i)):$(this).number(!0,2,"."," ")}),$(t).find(".phone ,[phone]").each(function(){$(this).attr("code");$(this).attr("href","tel:"+$(this).text().trim().replace(/-|\(|\)|\s/g,"").replace(/^8/,"+7"))}),$(t).find(".whatsapp, [whatsapp]").each(function(){var t=$(this).data("message"),e=$(this).text().trim().replace(/-|\(|\)|\s/g,"").replace(/^8/,"+7");$(this).attr("code");$(this).attr("href","whatsapp://send?phone="+e+"&abid="+e+"&text="+t)}),$(t).find(".email, [email]").each(function(){$(this).attr("href","mailto:"+$(this).text().trim())}),0<$(t).find("table.fieldset").length&&$(t).find("table.fieldset").changeInputs(function(t,e){"contenteditable"==e.st&&$(t).closest(".textarea").addClass("changed"),$(t).parent().addClass("changed")}),/#ddrpopup/.test(t)&&$(t).changeInputs(function(t,e){"contenteditable"==e.st&&$(t).closest(".textarea").addClass("changed"),$(t).parent().addClass("changed")})},jQuery(document).ready(function(r){setBaseScripts(),r(document).on("focus gesturestart",function(t){t.preventDefault()}),r("body").on("focus","input, textarea, select",function(){r(this).parent("div").addClass("focused")}),r("body").on("focus",".file",function(){r(this).addClass("focused")}),r("body").on("blur","input, textarea, select",function(){r(this).parent("div").removeClass("focused")}),r("body").on("blur",".file",function(){r(this).addClass("focused")}),r("body").on("focus","input.error, textarea.error, select.error, .field.error, .textarea.error, .select.error, .file.error",function(){var t=this;r(t).removeClass("error"),setTimeout(function(){r(t).find("span.error").remove(),r(t).siblings("span.error").remove()},160)}),r("body").on(tapEvent,".file.error",function(){var t=this;r(t).removeClass("error"),setTimeout(function(){r(t).find("span.error").remove()},160)}),r("body").on("submit","form:not([action])",function(t){return t.preventDefault(),!1}),r("body").on("focus",'input[type="text"]:not([noedit]), input[type="password"]:not([noedit]), input[type="email"]:not([noedit]), input[type="tel"]:not([noedit])',function(){r(this).removeAttrib("readonly")}),0==/iPhone|iPad|iPod/i.test(navigator.userAgent)&&r("body").on("blur",'input[type="text"]:not([noedit]), input[type="password"]:not([noedit]), input[type="email"]:not([noedit]), input[type="tel"]:not([noedit])',function(){r(this).setAttrib("readonly")}),r("body").on("change",'input[type="checkbox"]',function(){r(this)[0].hasAttribute("checked")?(r(this).prop("checked",!1),r(this)[0].removeAttribute("checked")):(r(this).prop("checked",!0),r(this)[0].setAttribute("checked",""))}),r(window).scrollTop()>2*r(window).height()?r("[scrolltop]").addClass("visible"):r("[scrolltop]").removeClass("visible"),r(window).on("scroll",function(){r(this).scrollTop()>2*r(window).height()?r("[scrolltop]").addClass("visible"):r("[scrolltop]").removeClass("visible hover")}),r("[scrolltop]").on("click",function(t){t.preventDefault(),r("html, body").animate({scrollTop:0},800,"easeInOutQuint")}),r("[scrolltop]").on("tap click mouseenter",function(){r(this).addClass("hover")}),r("[scrolltop]").on("mouseleave",function(){r(this).removeClass("hover")}),r("body").find("[parallax]").each(function(){var t=r(this).attr("parallax").split("|");r(this).parallax({imageSrc:t[0],speed:parseFloat(t[1])})}),r("body").on(tapEvent,".tabstitles li:not(.active)",function(){if(0<r(this).find("[ignore]:hover").length)return!1;var t=this,e=location.hash.substr(1,location.hash.length).split("."),i=r(t).attr("id"),a=e[0],s=r(t).closest(".tabstitles"),n=r(s).siblings(".tabscontent");r(t).removeClass("error"),null==e[2]&&r("#"+a).find(".tabstitles:not(.sub)").siblings(".tabscontent").find(".tabstitles.sub").each(function(){r(this).children("li").removeClass("active"),r(this).children("li:first").addClass("active"),r(this).siblings(".tabscontent").find("[tabid]").removeClass("visible"),r(this).siblings(".tabscontent").find("[tabid]:first").addClass("visible")}),r(s).children("li").removeClass("active"),r(t).addClass("active"),0==r(s).hasClass("sub")?location.hash=a+"."+i:(e[1]||(e[1]=r(t).closest("#"+a).find(".tabstitles:not(.sub)").children(":first").attr("id")),location.hash=a+"."+e[1]+"."+i),0==r(n).children('[tabid="'+i+'"]').hasClass("visible")&&(r(n).children("[tabid]").removeClass("visible"),r(n).children('[tabid="'+i+'"]').addClass("visible"),r(document).trigger("tabsChange")),initEditors()}),r("body").on(tapEvent,"[showpassword]",function(){0<r(this).parent().find('input[type="password"]').length?(r(this).parent().find('input[type="password"]').prop("type","text"),r(this).removeClass("fa-eye").addClass("fa-eye-slash").prop("title","Скрыть пароль")):0<r(this).parent().find('input[type="text"]').length&&(r(this).parent().find('input[type="text"]').prop("type","password"),r(this).removeClass("fa-eye-slash").addClass("fa-eye").prop("title","Показать пароль"))}),r("#adminSetModifications").on("change",function(){var t=r(this).val();r.post("/admin/modifications/set_site_modification",{controller:"admin",mod:t},function(t){t&&pageReload()},"json")}),r("body").on(tapEvent,"[modification]",function(){var t=r(this).attr("modification");r.post("/admin/modifications/set_site_modification",{controller:"site",mod:t},function(t){t&&pageReload()},"json")}),r("body").on(tapEvent,"[ddrsort]",function(){ddrSort(this)}),r("body").on("focus","[ddrtextarealist]",function(){var e,s,a=this,i=r(a).attr("ddrtextarealist"),n=(r(a).attr("load"),r(a).attr("join")||";");function o(){var i=[],t=r(a).parent(".textarea");r(a).siblings(".textarea__addblock").find("input, select").each(function(t,e){"checkbox"==e.type?i.push(r(e).is(":checked")?1:0):i.push(r(e).val())}),""!=r(a).val()?r(a).val(r(a).val()+"\n"+i.join(n)):r(a).val(i.join(n)),t.length&&r(t).addClass("changed"),r(a).siblings(".textarea__addblock").find("input").val(""),r(a).siblings(".textarea__addblock").find("select").children("option").removeAttrib("selected"),r(a).siblings(".textarea__addblock").find("select").children("option:first").prop("selected",!0),r(a).scrollTop(999999999),r(a).siblings(".textarea__addblock").find('[class ^= "dcol"]:first').find("inpus, select").focus()}r("body").find("[ddraladd]").off(tapEvent),r("body").find(".textarea__addblock").find("input, select").off("keyup"),i&&(s=e="",i=i.split("|"),r.each(i,function(e,i){var a;return!i||(i=i.split(";"),t=i[0]||null,l=i[1]||null,d=i[2]||null,c=i[3]||null,!t)||(s=(s+='<div class="dcol'+(c?"-auto "+c:"")+'">')+'<label class="textareafields__label" for="ddrtextarealistfield'+e+'">'+l+"</label>","select"==t?(i=d.split(","),s+='<select id="ddrtextarealistfield'+e+'" tabid="'+e+'">',r.each(i,function(t,e){if(!e)return!0;var e=e.split(":"),i=e[0],e=null!=e[1]?e[1]:e[0];s+='<option value="'+i+'">'+e+"</option>"}),s+="</select>"):"checkbox"==t?(i=1==d?" checked":"",s=(s=(s+='<div class="checkbox"><div class="checkbox__item checkbox__item_ver2 checkbox__item_small h-24px">')+'<div><input id="ddrtextarealistfield'+e+'" type="checkbox"'+i+' tabid="'+e+'" />')+'<label for="ddrtextarealistfield'+e+'"></label></div></div></div>'):"number"==t?(a=null!=d?' value="'+d+'"':"",s+='<input id="ddrtextarealistfield'+e+'" type="number"'+a+' showrows tabid="'+e+'" />'):"text"==t&&(a=null!=d?' value="'+d+'"':"",s+='<input id="ddrtextarealistfield'+e+'" type="text"'+a+' tabid="'+e+'" />'),void(s+="</div>"))})),r(a).setAttrib("touch","textarea_opened"),e=e+'<div class="textarea__addblock"><div class="textareafields"><div class="drow dgutter-4">'+s+'</div></div><div class="textareabutton"><button ddraladd title="Добавить строку"><i class="fa fa-plus"></i></button></div></div>',0==r(a).siblings(".textarea__addblock").length&&r(a).after(e),i=r(a).siblings(".textarea__addblock").height(),r(a).siblings(".textarea__addblock").css("bottom",-i+"px"),r(a).siblings(".textarea__addblock").find("input, select").on("keyup",function(t){13==t.keyCode&&o()}),r(a).siblings(".textarea__addblock").find("[ddraladd]").on(tapEvent,function(){o()})})});